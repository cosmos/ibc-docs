(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{637:function(e,t,a){"use strict";a.r(t);var o=a(0),n=Object(o.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"migrating-from-ibc-go-v2-to-v3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#migrating-from-ibc-go-v2-to-v3"}},[e._v("#")]),e._v(" Migrating from ibc-go v2 to v3")]),e._v(" "),a("p",[e._v("This document is intended to highlight significant changes which may require more information than presented in the CHANGELOG.\nAny changes that must be done by a user of ibc-go should be documented here.")]),e._v(" "),a("p",[e._v("There are four sections based on the four potential user groups of this document:")]),e._v(" "),a("ul",[a("li",[e._v("Chains")]),e._v(" "),a("li",[e._v("IBC Apps")]),e._v(" "),a("li",[e._v("Relayers")]),e._v(" "),a("li",[e._v("IBC Light Clients")])]),e._v(" "),a("p",[a("strong",[e._v("Note:")]),e._v(" ibc-go supports golang semantic versioning and therefore all imports must be updated to bump the version number on major releases.")]),e._v(" "),a("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Z2l0aHViLmNvbS9jb3Ntb3MvaWJjLWdvL3YyIC0mZ3Q7IGdpdGh1Yi5jb20vY29zbW9zL2liYy1nby92Mwo="}}),e._v(" "),a("p",[e._v("No genesis or in-place migrations are required when upgrading from v1 or v2 of ibc-go.")]),e._v(" "),a("h2",{attrs:{id:"chains"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#chains"}},[e._v("#")]),e._v(" Chains")]),e._v(" "),a("h3",{attrs:{id:"ics20"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ics20"}},[e._v("#")]),e._v(" ICS20")]),e._v(" "),a("p",[e._v("The "),a("code",[e._v("transferkeeper.NewKeeper(...)")]),e._v(" now takes in an ICS4Wrapper.\nThe ICS4Wrapper should be the IBC Channel Keeper unless ICS 20 is being connected to a middleware application.")]),e._v(" "),a("h3",{attrs:{id:"ics27"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ics27"}},[e._v("#")]),e._v(" ICS27")]),e._v(" "),a("p",[e._v("ICS27 Interchain Accounts has been added as a supported IBC application of ibc-go.\nPlease see the "),a("RouterLink",{attrs:{to:"/app-modules/interchain-accounts/overview.html"}},[e._v("ICS27 documentation")]),e._v(" for more information.")],1),e._v(" "),a("h2",{attrs:{id:"ibc-apps"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ibc-apps"}},[e._v("#")]),e._v(" IBC Apps")]),e._v(" "),a("h3",{attrs:{id:"onchanopentry-must-return-negotiated-application-version"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#onchanopentry-must-return-negotiated-application-version"}},[e._v("#")]),e._v(" "),a("code",[e._v("OnChanOpenTry")]),e._v(" must return negotiated application version")]),e._v(" "),a("p",[e._v("The "),a("code",[e._v("OnChanOpenTry")]),e._v(" application callback has been modified.\nThe return signature now includes the application version.\nIBC applications must perform application version negoitation in "),a("code",[e._v("OnChanOpenTry")]),e._v(" using the counterparty version.\nThe negotiated application version then must be returned in "),a("code",[e._v("OnChanOpenTry")]),e._v(" to core IBC.\nCore IBC will set this version in the TRYOPEN channel.")]),e._v(" "),a("h3",{attrs:{id:"negotiateappversion-removed-from-ibcmodule-interface"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#negotiateappversion-removed-from-ibcmodule-interface"}},[e._v("#")]),e._v(" "),a("code",[e._v("NegotiateAppVersion")]),e._v(" removed from "),a("code",[e._v("IBCModule")]),e._v(" interface")]),e._v(" "),a("p",[e._v("Previously this logic was handled by the "),a("code",[e._v("NegotiateAppVersion")]),e._v(" function.\nRelayers would query this function before calling "),a("code",[e._v("ChanOpenTry")]),e._v(".\nApplications would then need to verify that the passed in version was correct.\nNow applications will perform this version negotiation during the channel handshake, thus removing the need for "),a("code",[e._v("NegotiateAppVersion")]),e._v(".")]),e._v(" "),a("h3",{attrs:{id:"channel-state-will-not-be-set-before-application-callback"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#channel-state-will-not-be-set-before-application-callback"}},[e._v("#")]),e._v(" Channel state will not be set before application callback")]),e._v(" "),a("p",[e._v("The channel handshake logic has been reorganized within core IBC.\nChannel state will not be set in state after the application callback is performed.\nApplications must rely only on the passed in channel parameters instead of querying the channel keeper for channel state.")]),e._v(" "),a("h3",{attrs:{id:"ibc-application-callbacks-moved-from-appmodule-to-ibcmodule"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ibc-application-callbacks-moved-from-appmodule-to-ibcmodule"}},[e._v("#")]),e._v(" IBC application callbacks moved from "),a("code",[e._v("AppModule")]),e._v(" to "),a("code",[e._v("IBCModule")])]),e._v(" "),a("p",[e._v("Previously, IBC module callbacks were apart of the "),a("code",[e._v("AppModule")]),e._v(" type.\nThe recommended approach is to create an "),a("code",[e._v("IBCModule")]),e._v(" type and move the IBC module callbacks from "),a("code",[e._v("AppModule")]),e._v(" to "),a("code",[e._v("IBCModule")]),e._v(" in a separate file "),a("code",[e._v("ibc_module.go")]),e._v(".")]),e._v(" "),a("p",[e._v("The mock module go API has been broken in this release by applying the above format.\nThe IBC module callbacks have been moved from the mock modules "),a("code",[e._v("AppModule")]),e._v(" into a new type "),a("code",[e._v("IBCModule")]),e._v(".")]),e._v(" "),a("p",[e._v("As apart of this release, the mock module now supports middleware testing. Please see the "),a("RouterLink",{attrs:{to:"/testing/#middleware-testing"}},[e._v("README")]),e._v(" for more information.")],1),e._v(" "),a("p",[e._v("Please review the "),a("a",{attrs:{href:"../../testing/mock/ibc_module.go"}},[e._v("mock")]),e._v(" and "),a("a",{attrs:{href:"../../modules/apps/transfer/ibc_module.go"}},[e._v("transfer")]),e._v(" modules as examples. Additionally, "),a("a",{attrs:{href:"../../testing/simapp/app.go"}},[e._v("simapp")]),e._v(" provides an example of how "),a("code",[e._v("IBCModule")]),e._v(" types should now be added to the IBC router in favour of "),a("code",[e._v("AppModule")]),e._v(".")]),e._v(" "),a("h2",{attrs:{id:"relayers"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#relayers"}},[e._v("#")]),e._v(" Relayers")]),e._v(" "),a("p",[a("code",[e._v("AppVersion")]),e._v(" gRPC has been removed.\nThe "),a("code",[e._v("version")]),e._v(" string in "),a("code",[e._v("MsgChanOpenTry")]),e._v(" has been deprecated and will be ignored by core IBC.\nRelayers no longer need to determine the version to use on the "),a("code",[e._v("ChanOpenTry")]),e._v(" step.\nIBC applications will determine the correct version using the counterparty version.")]),e._v(" "),a("h2",{attrs:{id:"ibc-light-clients"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ibc-light-clients"}},[e._v("#")]),e._v(" IBC Light Clients")]),e._v(" "),a("p",[e._v("The "),a("code",[e._v("GetProofSpecs")]),e._v(" function has been removed from the "),a("code",[e._v("ClientState")]),e._v(" interface. This function was previously unused by core IBC. Light clients which don't use this function may remove it.")])],1)}),[],!1,null,null,null);t.default=n.exports}}]);