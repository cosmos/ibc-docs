(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{666:function(t,e,g){"use strict";g.r(e);var l=g(0),d=Object(l.a)({},(function(){var t=this,e=t.$createElement,g=t._self._c||e;return g("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[g("h1",{attrs:{id:"bind-ports"}},[g("a",{staticClass:"header-anchor",attrs:{href:"#bind-ports"}},[t._v("#")]),t._v(" Bind ports")]),t._v(" "),g("p",{attrs:{synopsis:""}},[t._v("Learn what changes to make to bind modules to their ports on initialization.")]),t._v(" "),g("h2",{attrs:{id:"pre-requisites-readings"}},[g("a",{staticClass:"header-anchor",attrs:{href:"#pre-requisites-readings"}},[t._v("#")]),t._v(" Pre-requisites Readings")]),t._v(" "),g("ul",[g("li",{attrs:{prereq:""}},[g("RouterLink",{attrs:{to:"/ibc/overview.html"}},[t._v("IBC Overview")]),t._v(")")],1),t._v(" "),g("li",{attrs:{prereq:""}},[g("RouterLink",{attrs:{to:"/ibc/integration.html"}},[t._v("IBC default integration")])],1)]),t._v(" "),g("p",[t._v("Currently, ports must be bound on app initialization. In order to bind modules to their respective ports on initialization, the following needs to be implemented:")]),t._v(" "),g("blockquote",[g("p",[t._v("Note that "),g("code",[t._v("portID")]),t._v(" does not refer to a certain numerical ID, like "),g("code",[t._v("localhost:8080")]),t._v(" with a "),g("code",[t._v("portID")]),t._v(" 8080. Rather it refers to the application module the port binds. For IBC Modules built with the Cosmos SDK, it defaults to the module's name and for Cosmwasm contracts it defaults to the contract address.")])]),t._v(" "),g("ol",[g("li",[g("p",[t._v("Add port ID to the "),g("code",[t._v("GenesisState")]),t._v(" proto definition:")]),t._v(" "),g("tm-code-block",{staticClass:"codeblock",attrs:{language:"protobuf",base64:"bWVzc2FnZSBHZW5lc2lzU3RhdGUgewogICAgIHN0cmluZyBwb3J0X2lkID0gMTsKICAgICAvLyBvdGhlciBmaWVsZHMKfQo="}})],1),t._v(" "),g("li",[g("p",[t._v("Add port ID as a key to the module store:")]),t._v(" "),g("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8geC8mbHQ7bW9kdWxlTmFtZSZndDsvdHlwZXMva2V5cy5nbwpjb25zdCAoCiAgICAvLyBNb2R1bGVOYW1lIGRlZmluZXMgdGhlIElCQyBNb2R1bGUgbmFtZQogICAgTW9kdWxlTmFtZSA9ICZxdW90O21vZHVsZU5hbWUmcXVvdDsKCiAgICAvLyBWZXJzaW9uIGRlZmluZXMgdGhlIGN1cnJlbnQgdmVyc2lvbiB0aGUgSUJDCiAgICAvLyBtb2R1bGUgc3VwcG9ydHMKICAgIFZlcnNpb24gPSAmcXVvdDttb2R1bGVWZXJzaW9uLTEmcXVvdDsKCiAgICAvLyBQb3J0SUQgaXMgdGhlIGRlZmF1bHQgcG9ydCBpZCB0aGF0IG1vZHVsZSBiaW5kcyB0bwogICAgUG9ydElEID0gJnF1b3Q7cG9ydElEJnF1b3Q7CgogICAgLy8gLi4uCikK"}})],1),t._v(" "),g("li",[g("p",[t._v("Add port ID to "),g("code",[t._v("x/<moduleName>/types/genesis.go")]),t._v(":")]),t._v(" "),g("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8gaW4geC8mbHQ7bW9kdWxlTmFtZSZndDsvdHlwZXMvZ2VuZXNpcy5nbwoKLy8gRGVmYXVsdEdlbmVzaXNTdGF0ZSByZXR1cm5zIGEgR2VuZXNpc1N0YXRlIHdpdGggJnF1b3Q7dHJhbnNmZXImcXVvdDsgYXMgdGhlIGRlZmF1bHQgUG9ydElELgpmdW5jIERlZmF1bHRHZW5lc2lzU3RhdGUoKSAqR2VuZXNpc1N0YXRlIHsKICAgIHJldHVybiAmYW1wO0dlbmVzaXNTdGF0ZXsKICAgICAgICBQb3J0SWQ6ICAgICAgUG9ydElELAogICAgICAgIC8vIGFkZGl0aW9uYWwgay12IGZpZWxkcwogICAgfQp9CgovLyBWYWxpZGF0ZSBwZXJmb3JtcyBiYXNpYyBnZW5lc2lzIHN0YXRlIHZhbGlkYXRpb24gcmV0dXJuaW5nIGFuIGVycm9yIHVwb24gYW55Ci8vIGZhaWx1cmUuCmZ1bmMgKGdzIEdlbmVzaXNTdGF0ZSkgVmFsaWRhdGUoKSBlcnJvciB7CiAgICBpZiBlcnIgOj0gaG9zdC5Qb3J0SWRlbnRpZmllclZhbGlkYXRvcihncy5Qb3J0SWQpOyBlcnIgIT0gbmlsIHsKICAgICAgICByZXR1cm4gZXJyCiAgICB9CiAgICAvL2FkZHRpb25hbCB2YWxpZGF0aW9ucwoKICAgIHJldHVybiBncy5QYXJhbXMuVmFsaWRhdGUoKQp9Cg=="}})],1),t._v(" "),g("li",[g("p",[t._v("Bind to port(s) in the module keeper's "),g("code",[t._v("InitGenesis")]),t._v(":")]),t._v(" "),g("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8gSW5pdEdlbmVzaXMgaW5pdGlhbGl6ZXMgdGhlIGliYy1tb2R1bGUgc3RhdGUgYW5kIGJpbmRzIHRvIFBvcnRJRC4KZnVuYyAoayBLZWVwZXIpIEluaXRHZW5lc2lzKGN0eCBzZGsuQ29udGV4dCwgc3RhdGUgdHlwZXMuR2VuZXNpc1N0YXRlKSB7CiAgICBrLlNldFBvcnQoY3R4LCBzdGF0ZS5Qb3J0SWQpCgogICAgLy8gLi4uCgogICAgLy8gT25seSB0cnkgdG8gYmluZCB0byBwb3J0IGlmIGl0IGlzIG5vdCBhbHJlYWR5IGJvdW5kLCBzaW5jZSB3ZSBtYXkgYWxyZWFkeSBvd24KICAgIC8vIHBvcnQgY2FwYWJpbGl0eSBmcm9tIGNhcGFiaWxpdHkgSW5pdEdlbmVzaXMKICAgIGlmICFrLklzQm91bmQoY3R4LCBzdGF0ZS5Qb3J0SWQpIHsKICAgICAgICAvLyB0cmFuc2ZlciBtb2R1bGUgYmluZHMgdG8gdGhlIHRyYW5zZmVyIHBvcnQgb24gSW5pdENoYWluCiAgICAgICAgLy8gYW5kIGNsYWltcyB0aGUgcmV0dXJuZWQgY2FwYWJpbGl0eQogICAgICAgIGVyciA6PSBrLkJpbmRQb3J0KGN0eCwgc3RhdGUuUG9ydElkKQogICAgICAgIGlmIGVyciAhPSBuaWwgewogICAgICAgICAgICBwYW5pYyhmbXQuU3ByaW50ZigmcXVvdDtjb3VsZCBub3QgY2xhaW0gcG9ydCBjYXBhYmlsaXR5OiAldiZxdW90OywgZXJyKSkKICAgICAgICB9CiAgICB9CgogICAgLy8gLi4uCn0K"}}),t._v(" "),g("p",[t._v("With:")]),t._v(" "),g("tm-code-block",{staticClass:"codeblock",attrs:{language:"go",base64:"Ly8gSXNCb3VuZCBjaGVja3MgaWYgdGhlICBtb2R1bGUgaXMgYWxyZWFkeSBib3VuZCB0byB0aGUgZGVzaXJlZCBwb3J0CmZ1bmMgKGsgS2VlcGVyKSBJc0JvdW5kKGN0eCBzZGsuQ29udGV4dCwgcG9ydElEIHN0cmluZykgYm9vbCB7CiAgICBfLCBvayA6PSBrLnNjb3BlZEtlZXBlci5HZXRDYXBhYmlsaXR5KGN0eCwgaG9zdC5Qb3J0UGF0aChwb3J0SUQpKQogICAgcmV0dXJuIG9rCn0KCi8vIEJpbmRQb3J0IGRlZmluZXMgYSB3cmFwcGVyIGZ1bmN0aW9uIGZvciB0aGUgcG9ydCBLZWVwZXIncyBmdW5jdGlvbiBpbgovLyBvcmRlciB0byBleHBvc2UgaXQgdG8gbW9kdWxlJ3MgSW5pdEdlbmVzaXMgZnVuY3Rpb24KZnVuYyAoayBLZWVwZXIpIEJpbmRQb3J0KGN0eCBzZGsuQ29udGV4dCwgcG9ydElEIHN0cmluZykgZXJyb3IgewogICAgY2FwIDo9IGsucG9ydEtlZXBlci5CaW5kUG9ydChjdHgsIHBvcnRJRCkKICAgIHJldHVybiBrLkNsYWltQ2FwYWJpbGl0eShjdHgsIGNhcCwgaG9zdC5Qb3J0UGF0aChwb3J0SUQpKQp9Cg=="}}),t._v(" "),g("p",[t._v("The module binds to the desired port(s) and returns the capabilities.")]),t._v(" "),g("p",[t._v("In the above we find reference to keeper methods that wrap other keeper functionality, in the next section the keeper methods that need to be implemented will be defined.")])],1)])])}),[],!1,null,null,null);e.default=d.exports}}]);